CREATE TABLE common_oltp.user_2fa (id SERIAL NOT NULL, user_id NUMERIC(10,0) NOT NULL, mfa_enabled BOOLEAN DEFAULT false NOT NULL, dice_enabled BOOLEAN DEFAULT false NOT NULL, created_by NUMERIC(10,0) NOT NULL, created_at TIMESTAMP(6) WITHOUT TIME ZONE NOT NULL DEFAULT current_timestamp, modified_by NUMERIC(10,0) NOT NULL, modified_at TIMESTAMP(6) WITHOUT TIME ZONE NOT NULL DEFAULT current_timestamp, CONSTRAINT user_2fa_pk PRIMARY KEY (id), CONSTRAINT user_2fa_user_id_fkey FOREIGN KEY (user_id) REFERENCES "user" ("user_id"), UNIQUE (user_id));
CREATE TABLE common_oltp.dice_connection (id SERIAL NOT NULL, user_id NUMERIC(10,0) NOT NULL, connection CHARACTER VARYING(50) NOT NULL, accepted BOOLEAN DEFAULT false NOT NULL, created_at TIMESTAMP(6) WITHOUT TIME ZONE NOT NULL DEFAULT current_timestamp, CONSTRAINT dice_connection_pk PRIMARY KEY (id), CONSTRAINT dice_connection_user_id_fkey FOREIGN KEY (user_id) REFERENCES "user" ("user_id"), UNIQUE (user_id));
CREATE TABLE common_oltp.user_otp_email (id SERIAL NOT NULL, user_id NUMERIC(10,0) NOT NULL, mode SMALLINT NOT NULL, otp CHARACTER VARYING(6) NOT NULL, expire_at TIMESTAMP(6) WITHOUT TIME ZONE NOT NULL, resend BOOLEAN default FALSE NOT NULL, fail_count SMALLINT NOT NULL DEFAULT 0, CONSTRAINT user_otp_email_pk PRIMARY KEY (id), CONSTRAINT user_otp_email_user_id_fkey FOREIGN KEY (user_id) REFERENCES "user" ("user_id"), UNIQUE (user_id, mode));